<!DOCTYPE html><html><head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=Edge">
        <meta name="description">
        <meta name="keywords" content="static content generator,static site generator,static site,HTML,web development,.NET,C#,Razor,Markdown,YAML">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link rel="shortcut icon" href="/cs-unity/assets/img/favicon.ico" type="image/x-icon">
        <link rel="icon" href="/cs-unity/assets/img/favicon.ico" type="image/x-icon">
        <title>C# in Unity - Delegates</title>
        <link href="/cs-unity/assets/css/highlight.css" rel="stylesheet">
        <link href="/cs-unity/assets/css/bootstrap/bootstrap.css" rel="stylesheet">
        <link href="/cs-unity/assets/css/adminlte/AdminLTE.css" rel="stylesheet">
        <link href="/cs-unity/assets/css/theme/theme.css" rel="stylesheet">
        <link href="//fonts.googleapis.com/css?family=Roboto+Mono:400,700|Roboto:400,400i,700,700i" rel="stylesheet">
        <link href="/cs-unity/assets/css/font-awesome.min.css" rel="stylesheet" type="text/css">
        <link href="/cs-unity/assets/css/override.css" rel="stylesheet">
        <script src="/cs-unity/assets/js/jquery-2.2.3.min.js"></script>
        <script src="/cs-unity/assets/js/bootstrap.min.js"></script>        
        <script src="/cs-unity/assets/js/app.min.js"></script>         
        <script src="/cs-unity/assets/js/highlight.pack.js"></script>   
        <script src="/cs-unity/assets/js/jquery.slimscroll.min.js"></script>
        <script src="/cs-unity/assets/js/jquery.sticky-kit.min.js"></script>
        <script src="/cs-unity/assets/js/mermaid.min.js"></script>
        <script src="/cs-unity/assets/js/svg-pan-zoom.min.js"></script>
        <!--[if lt IE 9]>
        <script src="/cs-unity/assets/js/html5shiv.min.js"></script>
        <script src="/cs-unity/assets/js/respond.min.js"></script>
        <![endif]-->  

        
    </head>
    <body class="hold-transition wyam layout-boxed  ">    
        <div class="top-banner"></div>
        <div class="wrapper with-container">
            <!-- Header -->
            <header class="main-header">   
                     
                <a href="/cs-unity/" class="logo">
                            <span>C# in Unity</span>
                </a>   
                         
                <nav class="navbar navbar-static-top" role="navigation">
                    <!-- Sidebar toggle button-->
                        <a href="#" class="sidebar-toggle visible-xs-block" data-toggle="offcanvas" role="button">
                            <span class="sr-only">Toggle side menu</span>
                            <i class="fa fa-chevron-circle-right"></i>
                        </a>
                                        
                    <div class="navbar-header">
                        <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar-collapse">
                            <span class="sr-only">Toggle side menu</span>
                            <i class="fa fa-chevron-circle-down"></i>
                        </button>
                    </div>
            
                    <!-- Collect the nav links, forms, and other content for toggling -->
                    <div class="collapse navbar-collapse pull-left" id="navbar-collapse">
                        <ul class="nav navbar-nav">                            
                                    <li class="active"><a href="/cs-unity/docs"><img src="/cs-unity/images/docs.png" height="20px" width="7.5px" style="left:-5px"> Documentation</a></li>
        <li><a href="mailto:mail@kybernetik.com.au"><img src="/cs-unity/images/contact.png" height="20px" width="19.6875px" style="left:-4px"> mail@kybernetik.com.au</a></li>
        <li><a href="https://kybernetik.com.au"><img src="/cs-unity/images/kybernetik.png" height="20px" width="20px" style="left:-2px"> My Unity Assets</a></li>

<li style="width:100%">
<form class="search-form" name="search" action="/cs-unity/search">
<span><input class="search-input" id="search" name="q" type="text" placeholder="Search..."></span>
<div class="search-button"><button type="submit"><i class="fa fa-search"></i></button></div>
</form>
</li> 
                        </ul>       
                    </div>
                    <!-- /.navbar-collapse -->
                
                    <!-- Navbar Right Menu -->
                </nav>
            </header>
            
            <!-- Left side column. contains the logo and sidebar -->
            <aside class="main-sidebar ">
                <section class="infobar" data-spy="affix" data-offset-top="60" data-offset-bottom="200"> 
                    	
    <div id="infobar-headings"><h6>On This Page</h6><p><a href="#inline-delegates">Inline Delegates</a></p>
<p><a href="#unity-events">Unity Events</a></p>
<hr class="infobar-hidden">
</div>

                </section>
                <section class="sidebar">    
                                     
                    

                    <ul class="sidebar-menu">
                        

                <li class="treeview active">
                    <a href="/cs-unity/docs/introduction">Introduction to C# in Unity</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li><a href="/cs-unity/docs/introduction/overview">Scripting Overview</a></li>
                <li><a href="/cs-unity/docs/introduction/organization">Organization</a></li>
                <li><a href="/cs-unity/docs/introduction/variables">Variables</a></li>
                <li class="treeview active">
                    <a href="/cs-unity/docs/introduction/methods">Methods</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li><a href="/cs-unity/docs/introduction/methods/parameters">Parameters</a></li>
                <li><a href="/cs-unity/docs/introduction/methods/flow-control">Flow Control</a></li>
                <li><a href="/cs-unity/docs/introduction/methods/return">Return Values</a></li>
                <li><a href="/cs-unity/docs/introduction/methods/constructors">Constructors</a></li>
                <li><a href="/cs-unity/docs/introduction/methods/properties">Properties</a></li>
                <li><a href="/cs-unity/docs/introduction/methods/overloads">Overloads</a></li>
                <li><a href="/cs-unity/docs/introduction/methods/messages">Messages</a></li>
                <li class="selected"><a href="/cs-unity/docs/introduction/methods/delegates">Delegates</a></li>
                <li><a href="/cs-unity/docs/introduction/methods/extension">Extension Methods</a></li>
                <li><a href="/cs-unity/docs/introduction/methods/conditional">Conditional Compilation</a></li>
                <li><a href="/cs-unity/docs/introduction/methods/expression-bodied">Expression Bodied Members</a></li>

                    </ul>
                </li>
                <li><a href="/cs-unity/docs/introduction/inheritance">Inheritance</a></li>
                <li><a href="/cs-unity/docs/introduction/vectors">Vectors</a></li>
                <li class="treeview">
                    <a href="/cs-unity/docs/introduction/other">Other Topics</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li><a href="/cs-unity/docs/introduction/other/comments">Comments</a></li>
                <li><a href="/cs-unity/docs/introduction/other/exceptions">Exceptions</a></li>
                <li><a href="/cs-unity/docs/introduction/other/debugging">Debuggers and Logging</a></li>
                <li><a href="/cs-unity/docs/introduction/other/memory-management">Memory Management</a></li>

                    </ul>
                </li>

                    </ul>
                </li>
                <li class="treeview">
                    <a href="/cs-unity/docs/coding-standard">Coding Standard</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li><a href="/cs-unity/docs/coding-standard/naming">Naming</a></li>
                <li><a href="/cs-unity/docs/coding-standard/comments">Comments</a></li>

                    </ul>
                </li>
                <li><a href="/cs-unity/docs/default-script-template">Default Script Template</a></li>
                <li class="treeview">
                    <a href="/cs-unity/docs/component-referencing">Component Referencing</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li><a href="/cs-unity/docs/component-referencing/get-component">Get Component</a></li>
                <li><a href="/cs-unity/docs/component-referencing/get-component-cached">Get Component Cached</a></li>
                <li><a href="/cs-unity/docs/component-referencing/require-component">Require Component</a></li>
                <li><a href="/cs-unity/docs/component-referencing/serialize-field">Serialize Field</a></li>
                <li><a href="/cs-unity/docs/component-referencing/reset-method">Reset Method</a></li>
                <li><a href="/cs-unity/docs/component-referencing/onvalidate-method">On Validate Method</a></li>
                <li><a href="/cs-unity/docs/component-referencing/extension-methods">Extension Methods</a></li>

                    </ul>
                </li>
                <li><a href="/cs-unity/docs/asset-referencing">Asset Referencing</a></li>

                    </ul>
                            
                </section>                
            </aside>
            
            <!-- Content Wrapper. Contains page content -->
            <div class="content-wrapper">
                



		<section class="content-header">
			<h1>Delegates</h1>
		</section>
	<section class="content">
		<p>A <a href="https://docs.microsoft.com/en-us/dotnet/csharp/programming-guide/delegates/">Delegate</a> is a <a href="../variables">Variable</a> which references a <a href=".">Method</a>.</p>
<p>The most common type of delegate is <a href="https://docs.microsoft.com/en-us/dotnet/api/system.action"><code>System.Action</code></a> which represents a method with no parameters and <code>void</code> as its return type. There are also generic <a href="https://docs.microsoft.com/en-us/dotnet/api/system.action-1"><code>System.Action&lt;T&gt;</code></a> and <a href="https://docs.microsoft.com/en-us/dotnet/api/system.func-1"><code>System.Func&lt;TResult&gt;</code></a> delegates which can take parameters and return values. Though if you need parameters you will often want to define your own <code>delegate</code> type so that you can properly name the parameters, for example:</p>
<pre><code class="language-cs">public delegate int PerformCalculation(int x, int y);
</code></pre>
<p>Delegates can be used as a type of <a href="../variables">Variable</a> just like any other, except that you assign methods to them and can call them like methods (calling a delegate is referred to as "invoking" it):</p>
<pre><code class="language-cs">using System;// For System.Action.
using UnityEngine;// For UnityEngine.MonoBehaviour.

public class Health : MonoBehaviour
{
    public <a href="https://docs.microsoft.com/en-us/dotnet/csharp/language-reference/keywords/event">event</a> Action onDeath;

    private int _CurrentHealth;

    public int CurrentHealth
    {
        get =&gt; _CurrentHealth;
        set
        {
            if (value &lt; 0)
                value = 0;
        
            _CurrentHealth = value;

            if (value &lt;= 0)
            {
                // If an onDeath delegate has been registered, invoke it.
                if (onDeath != null)
                    onDeath();
                else// Otherwise just destroy the GameObject this script is attached to.
                    Destroy(gameObject);
            }
        }
    }
}

public class Character : MonoBehaviour
{
    [<a href="../variables#serialized-fields">SerializeField</a>]
    private Health _Health;

    private void Awake()
    {
        // Register our Die method for the Health component to call.
        _Health.onDeath += Die;
    }

    private void Die()
    {
        // Play a death animation.
        // Turn the model into a <a href="https://en.wikipedia.org/wiki/Ragdoll_physics">ragdoll</a>.
        // Create an explosion.
        // etc.
    }
}
</code></pre>
<ul>
<li>The <a href="/animancer/docs/manual/events/animancer">Animancer Events</a> system uses delegates to allow users to specify their own methods that they want Animancer to call at specific times throughout an animation.</li>
<li>Delegates are <a href="../organization#values-and-references">Reference Types</a>, meaning that they need to be <a href="../other#garbage-collection">Garbage Collected</a>.</li>
<li>Multiple methods can be combined into a single delegate using the <code>+</code> and <code>+=</code> operators (then removed with <code>-</code> and <code>-=</code>), which creates a <a href="https://docs.microsoft.com/en-us/dotnet/csharp/programming-guide/delegates/how-to-combine-delegates-multicast-delegates">Multicase Delegate</a>.</li>
<li>The <a href="https://docs.microsoft.com/en-us/dotnet/csharp/language-reference/keywords/event"><code>event</code></a> keyword is a special <a href="../organization#access-modifiers">Access Modifier</a> which can be used on delegate fields to allow other classes to add and remove methods from it without allowing those classes to invoke it.</li>
</ul>
<h1 id="inline-delegates">Inline Delegates</h1>
<p>If you do not already have a method you want a delegate to point to, you can use an <a href="https://docs.microsoft.com/en-us/dotnet/csharp/language-reference/operators/delegate-operator">Anonymous Method</a> or <a href="https://docs.microsoft.com/en-us/dotnet/csharp/programming-guide/statements-expressions-operators/lambda-expressions">Lambda Expression</a> to define the target method in the same place where you assign it:</p>
<pre><code class="language-cs">// Using the Health class from the above example.

public class Character : MonoBehaviour
{
    [<a href="../variables#serialized-fields">SerializeField</a>]
    private Health _Health;

    private void Awake()
    {
        // Lambda expression:
        _Health.onDeath += () =&gt;
        {
            Debug.Log("Character Died");
        };
        
        // One-line Lambda expression:
        _Health.onDeath += () =&gt; Debug.Log("Character Died");
        
        // Anonymous method:
        _Health.onDeath += delegate()
        {
            Debug.Log("Character Died");
        };
    }
}
</code></pre>
<h1 id="unity-events">Unity Events</h1>
<p>Unity's <a href="../variables#serialized-fields">Serialization System</a> cannot serialize regular delegates or show them in the Inspector, which is where <a href="https://docs.unity3d.com/Manual/UnityEvents"><code>UnityEvent</code></a>s come in. They have several limitations on the types of methods they can call:</p>
<ul>
<li><a href="../organization#access-modifiers">Access Modifier</a> must be <code>public</code>.</li>
<li><a href="#return-types">Return Type</a> must be <code>void</code>.</li>
<li>Must have either no <a href="#parameters">Parameters</a> or one parameter of any of the following types: <code>bool</code>, <code>int</code>, <code>float</code>, <code>string</code>, or anything derived from <code>UnityEngine.Object</code> (including any <code>MonoBehaviour</code> or <code>ScriptableObject</code>).</li>
</ul>
<p>Any unsupported methods will simply not be listed in the menu.</p>
<p>One common use for <code>UnityEvent</code>s is in <a href="/animancer/docs/examples/basics/scene-setup#buttons">Buttons</a> and other UI components so that they can easily be set up to call methods in your scripts.</p>
<p>If you want your own scripts to have events which you can set up in the Inspector like that, you can use a <code>UnityEvent</code> like any other <a href="../variables#serialized-fields">Serialized Field</a>. However, you may be interested in my free <a href="/ultevents">UltEvents</a> plugin which serves the same purpose but does not have the same restrictions (see <a href="/ultevents/docs/ult-vs-unity">UltEvents vs. UnityEvents</a> for a comparison). Unfortunately, it is not possible to simply change Unity's UI <code>Button</code>s to use <code>UltEvent</code>s instead of <code>UnityEvent</code>s, however it is possible to redirect events to an <a href="/ultevents/docs/creating-and-triggering#ulteventholder"><code>UltEventHolder</code></a>.</p>
<p>Note that <code>UnityEvent</code>s (and <code>UltEvent</code>s) are less efficient than regular delegates so if you want to use events in your own scripts which you do not need to set up in the Inspector, then you should just use regular delegates.</p>

	</section>
                
            </div>           
            
            <!-- Footer -->
            <footer class="main-footer">
            </footer>
            
        </div>
        <div class="wrapper bottom-wrapper">
            <footer class="bottom-footer">
                <strong>
  <div style="text-align:left; display:flex">

    <div>
      <p>Contact</p>
      <p>
        <a href="mailto:mail@kybernetik.com.au">mail@kybernetik.com.au</a>
      </p>
    </div>

    <div style="width:10%"></div>

    <div>
      <p>My Unity Assets</p>
      <p>
        <a href="/animancer">Animancer</a>
      </p>
      <p>
        <a href="/inspector-gadgets">Inspector Gadgets</a>
      </p>
      <p>
        <a href="/weaver">Weaver</a>
      </p>
    </div>

    <div style="width:10%"></div>

    <div>
      <p>&nbsp;</p>
      <p>
        <a href="/ultevents">UltEvents</a>
      </p>
      <p>
        <a href="https://assetstore.unity.com/packages/tools/version-control/link-sync-pro-72872?aid=1100l8ah5">Link &amp; Sync</a>
      </p>
      <p>
        <a href="https://assetstore.unity.com/packages/vfx/shaders/simple-sun-shader-72042?aid=1100l8ah5">Simple Sun Shader</a>
      </p>
    </div>

  </div>
</strong>
            </footer>
        </div>
        <a href="javascript:" id="return-to-top"><i class="fa fa-chevron-up"></i></a>
        
        <script>           
            // Close the sidebar if we select an anchor link
            $(".main-sidebar a[href^='#']:not('.expand')").click(function(){
                $(document.body).removeClass('sidebar-open');
            });
            
            $(document).ready(function() {
                mermaid.initialize(
                {
                    flowchart:
                    {
                        useMaxWidth: false
                    },
					startOnLoad: false,
					cloneCssStyles: false
                });     
                mermaid.init(undefined, ".mermaid");

                // Remove the max-width setting that Mermaid sets
                var mermaidSvg = $('.mermaid svg');
                mermaidSvg.addClass('img-responsive');
                mermaidSvg.css('max-width', '');

                // Make it scrollable
				var target = document.querySelector(".mermaid svg");
				if(target !== null)
				{
					var panZoom = window.panZoom = svgPanZoom(target, {
						zoomEnabled: true,
						controlIconsEnabled: true,
						fit: true,
						center: true,
                        maxZoom: 20,
                        zoomScaleSensitivity: 0.6
					});			                          

                    // Do the reset once right away to fit the diagram
                    panZoom.resize();
                    panZoom.fit();
                    panZoom.center();
                    
                    $(window).resize(function(){
                        panZoom.resize();
                        panZoom.fit();
                        panZoom.center();
                    });
				}
                
                $('pre code').each(function(i, block) {
                    hljs.highlightBlock(block);
                });  
            });

            hljs.initHighlightingOnLoad();

            // Back to top
            $(window).scroll(function() {
                if ($(this).scrollTop() >= 200) {        // If page is scrolled more than 50px
                    $('#return-to-top').fadeIn(1000);    // Fade in the arrow
                } else {
                    $('#return-to-top').fadeOut(1000);   // Else fade out the arrow
                }
            });
            $('#return-to-top').click(function() {      // When arrow is clicked
                $('body,html').animate({
                    scrollTop : 0                       // Scroll to top of body
                }, 500);
            });
        </script>
    
</body></html>